webpackJsonp([8],{6458:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,o,r,n){var a=t&&t.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&a)for(var i in a)void 0===o[i]&&(o[i]=a[i]);else o||(o=a||{});if(1===s)o.children=n;else if(s>1){for(var u=Array(s),d=0;d<s;d++)u[d]=arguments[d+3];o.children=u}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:o,_owner:null}}}(),u=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),d=o(0),l=r(d),p=o(6845),c=r(p),f=o(81),h=r(f),m=o(78),b=r(m),w=o(37),v=o(5),y=r(v),g=o(77),P=o(79),O=o(41),S=function(e){return(0,w.createStyles)({form:{"& .MuiOutlinedInput-root.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#00cabe!important"},"& .MuiFormLabel-root.Mui-focused":{color:"#00cabe!important"}},textField:{margin:"auto",maxWidth:500,marginTop:"15px",display:"block","& fieldset:focus":{borderColor:"#f00!important"}}})},C=i("p",{},void 0,"OPS!"),_=i("p",{},void 0,"Password reset link is invalid or has expired"),N=i("span",{},void 0,"Send"),k=function(e){function t(e){n(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.onUpdate=function(e){e.preventDefault();var t=o.state,r=t.password,n=t.cpassword,a=t.phoneNumber;r!==n?o.setState({err:!0}):(0,h.default)({method:"POST",url:"/api/user/updatePassword",headers:{"Content-Type":"application/json"},data:{phoneNumber:a,password:r}}).then(function(e){(e.data="success")&&(0,h.default)({method:"POST",url:"/api/user/login",headers:{"Content-Type":"application/json"},data:{phoneNumber:a,password:r}}).then(function(e){void 0===e.data.token||""===e.data.token?setErrMsg(!0):(o.props.router.push("/"),o.props.dispatch((0,P.signIn)({token:e.data.token,firstname:e.data.firstname,phonenumber:a,password:r})))})})},o.onChangePassword=function(e){o.setState({password:e.target.value})},o.onChangeCPassword=function(e){o.setState({cpassword:e.target.value})},o.state={password:"",cpassword:"",err:!1,bodyerr:!1,phoneNumber:""},o}return s(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this;(0,h.default)({method:"POST",url:"/api/user/resetPassword",headers:{"Content-Type":"application/json"},data:{resetPasswordToken:this.props.params.token}}).then(function(t){t.data.phoneNumber?e.setState({phoneNumber:t.data.phoneNumber}):e.setState({bodyerr:!0})})}},{key:"render",value:function(){var e=this.state,t=e.err,o=e.bodyerr,r=e.password,n=e.cpassword,a=this.props.classes;return i("form",{onSubmit:this.onUpdate,className:(0,y.default)(c.default["body-container"],a.form)},void 0,!0===o&&i("div",{className:c.default["ops-container"]},void 0,C,_),!1===o&&i("div",{},void 0,i("p",{className:c.default.title},void 0,"Reset Password"),i(w.TextField,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",className:a.textField,value:r,onChange:this.onChangePassword}),i(w.TextField,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"cpassword",label:"Confirm Password",type:"password",id:"cpassword",className:a.textField,value:n,onChange:this.onChangeCPassword}),!0===t&&i("p",{className:c.default["err-msg"]},void 0,"Confirm Password doesn't match"),i(b.default,{className:c.default["btn-send"],type:"submit"},void 0,N)))}}]),t}(l.default.Component);t.default=(0,O.withRouter)((0,w.withStyles)(S)((0,g.connect)(null,null)(k)))},6845:function(e,t){e.exports={"btn-send":"cSOF4DRKeuYvlov6NDJiU","body-container":"_3avGrcLkO72pcqCeZ_g1qi",title:"jTE2dRhb1ban7OVwjryug","err-msg":"_2q_brSwziUWmf69HssDMTn","ops-container":"qoUat0-7aENbOt9DkV8Ub"}}});